# 建造者模式

## 过程

一个产品通常有不同的组成成分作为产品的零件，不同的产品可以有不同的零件。使用建造者模式可以使客户端不需要知道所生成的产品有哪些零件，每个产品对应的零件彼此有何不同，是怎么建造出来的，以及怎么组成产品。  

有时，建造零件的过程很复杂，因此，这些零件的建造过程被外部化到另一个称做建造者的对象里，建造者对象返回给客户端一个全部零件都建造完毕的产品对象。  

有时，零件的组装过程不同，或组装多少不同，生成的最终产品对象也不同，所以需要一个导演类，控制建造者对象组装零件的顺序和组装零件的多少。导演类并没有产品类的直接信息，它是控制建造者，而具体建造者和产品类直接相关。  

客户端需要产品时，首先创建导演类对象和建造者对象，然后让导演类对象指挥建造者对象组装产品，最后建造者对象向客户端返回构造好的产品对象。  

## 概念
建造者模式将产品(Product)的结构(Director)和产品零件的建构过程(Builder)对客户端(Client)隐藏起来，把对建造过程进行指挥的责任(Director)和具体建造零件的责任(ConcreteBuilder)分割开来。  

## 结构
![建造者模式类图](https://yulinwork.oss-cn-hangzhou.aliyuncs.com/patterns/builder.png)

**产品(Product)角色：** 产品便是建造中的复杂对象。一般来说，一个系统中会有多于一个的产品类，而且这些产品类并不一定有共同的接口，而完全可以是不相关联的。  

**抽象建造者（Builder）角色：** 给出一个抽象接口，以规范产品对象的各个组成成分的建造。一般而言，此接口独立于应用程序的商业逻辑。模式中直接创建产品对象的是具体建造者 (ConcreteBuilder)角色。具体建造者类必须实现这个接口所要求的两种方法：一种是建造方法(buildPart1和 buildPart2)，另一种是返还结构方法(retrieveResult)。一般来说，产品所包含的零件数目与建造方法的数目相符。换言之，有多少零件，就有多少相应的建造方法。  

**具体建造者（ConcreteBuilder）角色：** 担任这个角色的是与应用程序紧密相关的一些类，它们在应用程序调用下创建产品的实例。这个角色要完成的任务包括：1.实现抽象建造者Builder所声明的接口，给出一步一步地完成创建产品实例的操作。2.在建造过程完成后，提供产品的实例。  

**导演者（Director）角色：** 担任这个角色的类调用具体建造者角色以创建产品对象。应当指出的是，导演者角色并没有产品类的具体知识，真正拥有产品类的具体知识的是具体建造者角色。  
