# 原型模式

> 原型模式属于对象的创建模式。通过给出一个原型对象来指明所有创建的对象的类型，然后用复制这个原型对象的办法创建出更多同类型的对象。这就是原型模式的用意。  

## 结构
三个角色：  
**客户角色：** 提出创建对象的请求；  
**抽象原型角色：** 抽象角色，通常由接口实现，给出所有具体原型类的接口；  
**具体原型角色：** 被复制的对象  

## java
java中实现原型模式有两种方式。一种是自定义复制接口，一种是使用Object类中的clone方法实现复制。  

使用Object类中的clone方法，需要实现Cloneable接口。但这个方法实现的拷贝是浅拷贝，只复制了基本数据类型和字符串，引用数据类型只是复制了引用，没有复制内容，如果想到深拷贝，需要单独处理引用类型的拷贝。   

Object的clone方法在实现复制时，没有调用构造函数。即使构造函数是私有的，也不会影响。  

使用Object的clone方法复制对象，效率比使用new创建对象效率更高，因为它是直接在内存中操作二进制数据。  

使用自定义方式定义接口时，复制的内容都是自己实现。  

## 使用场景
1. 需要重复地创建对象时；  
2. 当直接创建对象的代价比较大时，则采用这种模式。例如，一个对象需要在一个高代价的数据库操作之后被创建。我们可以缓存该对象，在下一个请求时返回它的克隆，在需要的时候更新数据库，以此来减少数据库调用。  

## 缺点
配备克隆方法需要对类的功能进行通盘考虑，这对于全新的类不是很难，但对于已有的类不一定很容易，特别当一个类引用不支持串行化的间接对象，或者引用含有循环结构的时候。  
