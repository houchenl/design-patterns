# 策略模式

## 定义
1. 分离变化，抽象出了不变的部分，把它做成算法接口；比如布局变化之于文本布局，比如支付算法之于在线支付；
2. 将具体的算法实现分别封装，构成一个算法家族；
3. 客户端代码不会受到算法改变产生的影响；这种架构对未来新的需求具体非常弹性的支持；

**定义：** 策略模式将可变的部分从程序中抽象分离成算法接口，在该接口下分别封装一系列算法实现，并使它们可以相互替换，从而导致客户端程序独立于算法的改变；  


## 设计原则
**原则一：分离变与不变**  
变更是程序员长期面对的一个主题，如何才能使我们的应用在不断变化的过程之中保持架构的稳定呢？这就需要我们分离变与不变，将不变的东西抽象为接口，变化的部分交由实现去做，不要把变化的部分和不变的部分混在一起。  

**原则二：面向接口编程，而不是面向实现编程**  
接口为我们提供了一个契约，在总体上规定了双方的行为框架。再通过多态性，不同的实现类展示了世界的多样性。  

**原则三：多用组合，少用继承**  

## 策略模式的实现
1. 通过分离变化得出策略接口
2. 为策略接口提供实现类，得到算法家族
3. 客户程序中有一个策略接口
4. 在客户程序中选择/组装正确的策略接口实现类

## 策略模式优点
1. 使用了组合，使架构更加灵活
2. 富有弹性，可以较好的应对变化(开闭原则)
3. 更好的代码复用性(相对于继承)
4. 消除大量的条件语句

## 策略模式缺点
1. 客户代码需要了解每个策略实现的细节
2. 增加了类/对象的数目

## 策略模式的适用场景
1. 许多相关的类仅仅是行为差异
2. 运行时选取不同的算法变体
3. 通过条件语句在多个分支中选取一个
